import{H as O}from"./Header-fabc921f.js";import{T as D,b as w}from"./runtime-dom.esm-bundler-a6f2cd2a.js";import{d as G}from"./pinia-f4d3ecd1.js";import{C as r,G as H,_ as S,o as C,S as y,T as o,Y as T,u as t,V as b,W as K,a3 as M,a4 as x,a0 as A,a6 as I,Z as $,a1 as Z,a2 as J}from"./_plugin-vue_export-helper-f7306c69.js";const V=G("RegisterStore",()=>{let l=r(!1),e=r(!1),u=r(""),s=r("red"),a=r(!1),i=r(!1),p=r(""),m=r("red"),f=r(!1),n=H({name:"",account:"",password:"",doublePassword:null}),v=r(!1),g=r("");const k=new RegExp(/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,12}$/),W=()=>{f.value=!1},E=()=>{n.account!=""?a.value=!0:a.value=!1},R=()=>{i.value?(p.value="帳號已存在，請重新檢查",m.value="red"):(p.value="可以註冊",m.value="green")},B=()=>{p.value=""},F=()=>{k.test(n.password),k.test(n.password)?e.value=!1:e.value=!0,U(),j()},U=()=>{n.password!=""?l.value=!0:l.value=!1},j=()=>{e.value?(u.value="密碼格式不符合",s.value="red"):(u.value="密碼格式正確",s.value="green"),n.password===""&&(u.value="")},h=()=>{console.log(v.value),v.value?v.value=!1:v.value=!0},N=async()=>{if(n.account===""){p.value="不能為空",m.value="red";return}const c=`http://localhost:8080/api/user/checkAccountExist?account=${n.account}`;let P=await fetch(c,{method:"GET",headers:{"Content-Type":"application/json;charset=UTF-8"}}).then(function(d){return d.json()}).then(function(d){return console.log("res.repeat",d.repeat),d.repeat}).catch(d=>{console.error("Error:",d)});console.log(P),P?(i.value=!0,f.value=!1,console.log("重複",i.value)):(i.value=!1,f.value=!0,console.log("不重複",i.value)),E(),R()},z=()=>{console.log(n),fetch("http://localhost:8080/api/user/registerAccount",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then(function(c){return console.log(c),c.json()}).then(function(c){console.log("Success:",c),alert("註冊成功"),window.location.href="/login"}).catch(function(c){console.error("Error:",c)})};return{checkRegisterInfo:()=>{n.name!=""&&n.account!=""&&n.password!=""?n.doublePassword===n.password?f.value?(z(),console.log("執行註冊fetch registerButton(data)")):(console.log("尚未點選確認帳號，或該帳號已被註冊請重新檢查"),g.value="尚未點選確認帳號，或該帳號已被註冊請重新檢查",h()):(console.log("確認密碼不相符"),g.value="確認密碼不相符",h()):(console.log("欄位不能為空"),g.value="欄位不能為空",h())},checkPassword:F,checkAccount:N,AccountP:B,registControl:W,warmTextFn:h,data:n,regex:k,passControl:l,passwordError:e,passwordWarn:u,fontColor:s,accountControl:a,accountError:i,accountColor:m,accountWarn:p,registOpen:f,warmText:g,show:v}});const Y={class:"warmMain"},q={class:"warmText"},L=["textContent"],Q={class:"warmBtn"},X={__name:"registerWarm",setup(l){const e=V();return(u,s)=>(C(),y("div",Y,[o("div",q,[o("p",{textContent:T(t(e).warmText)},null,8,L)]),o("div",Q,[o("button",{onClick:s[0]||(s[0]=(...a)=>t(e).warmTextFn&&t(e).warmTextFn(...a))},"確定")])]))}},ee=S(X,[["__scopeId","data-v-511a4c95"]]);const _=l=>(Z("data-v-bd77afea"),l=l(),J(),l),te={key:0,class:"warmView"},oe={class:"container"},se=_(()=>o("h2",null,"註冊會員",-1)),ae={class:"regist_form"},ne={class:"group"},re=_(()=>o("label",{for:"user_account"},"創建帳號:",-1)),le=["textContent"],ce={class:"group"},ue=_(()=>o("label",{for:"user_password"},"創建密碼:",-1)),ie=["textContent"],de={class:"group"},_e=_(()=>o("label",{for:"check_password"},"確認密碼:",-1)),pe={class:"group"},fe=_(()=>o("label",{for:"user_name"},"你的暱稱:",-1)),ve={class:"btn-group"},me=_(()=>o("button",{class:"btn"},"取消",-1)),ge={__name:"registerComponents",setup(l){const e=V();return(u,s)=>(C(),y($,null,[b(D,{name:"bounce"},{default:K(()=>[t(e).show?(C(),y("p",te,[b(ee)])):M("",!0)]),_:1}),o("div",oe,[se,o("div",ae,[o("div",ne,[re,x(o("input",{type:"email",name:"",id:"user_account",placeholder:"請輸入電子信箱","onUpdate:modelValue":s[0]||(s[0]=a=>t(e).data.account=a),onKeyup:s[1]||(s[1]=a=>{t(e).AccountP(),t(e).registControl()})},null,544),[[w,t(e).data.account]]),o("p",{class:A(["ac_error",{open:t(e).accountControl}]),style:I({color:t(e).accountColor}),textContent:T(t(e).accountWarn)},null,14,le),o("button",{class:"check",onClick:s[2]||(s[2]=(...a)=>t(e).checkAccount&&t(e).checkAccount(...a))},"確認")]),o("div",ce,[ue,x(o("input",{type:"text",name:"",onKeyup:s[3]||(s[3]=(...a)=>t(e).checkPassword&&t(e).checkPassword(...a)),id:"user_password",placeholder:"需輸入8~12英數混合","onUpdate:modelValue":s[4]||(s[4]=a=>t(e).data.password=a)},null,544),[[w,t(e).data.password]]),o("p",{class:A(["pw_error",{open:t(e).passControl}]),style:I({color:t(e).fontColor}),textContent:T(t(e).passwordWarn)},null,14,ie)]),o("div",de,[_e,x(o("input",{type:"text",name:"",id:"check_password","onUpdate:modelValue":s[5]||(s[5]=a=>t(e).data.doublePassword=a)},null,512),[[w,t(e).data.doublePassword]])]),o("div",pe,[fe,x(o("input",{type:"text",name:"",id:"user_name","onUpdate:modelValue":s[6]||(s[6]=a=>t(e).data.name=a)},null,512),[[w,t(e).data.name]])]),o("div",ve,[o("button",{class:"btn",onClick:s[7]||(s[7]=(...a)=>t(e).checkRegisterInfo&&t(e).checkRegisterInfo(...a))},"註冊"),me])])])],64))}},he=S(ge,[["__scopeId","data-v-bd77afea"]]);const we={class:"regist_main"},xe={__name:"register",setup(l){return(e,u)=>(C(),y($,null,[b(O),o("div",we,[b(he)])],64))}},Se=S(xe,[["__scopeId","data-v-73825fc4"]]);export{Se as default};
