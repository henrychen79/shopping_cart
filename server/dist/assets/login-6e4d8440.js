import{H as b}from"./Header-fabc921f.js";import{T as y,b as f}from"./runtime-dom.esm-bundler-a6f2cd2a.js";import{d as C}from"./pinia-f4d3ecd1.js";import{G as S,C as v,_ as g,o as u,S as d,T as t,Y as T,u as s,R as V,V as r,W as m,a3 as $,a4 as h,X as w,Z as x,a1 as D,a2 as I}from"./_plugin-vue_export-helper-f7306c69.js";const k=C("loginStore",()=>{let n=S({account:"",password:""}),o=v(""),l=v(!1);const e=()=>{l.value?l.value=!1:l.value=!0};return{login:async()=>{let _=await fetch("http://localhost:8080/api/user/login",{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify(n)}).then(function(c){return c.json()}).then(function(c){return console.log(c),c}).catch(function(c){console.error("Error:",c)});if(console.log(_.accout),_.accout.length!=0){console.log("登入成功"),console.log(_),document.cookie=`access_token=${_.token};`;const c=document.cookie.replace(/(?:(?:^|.*;\s*)access_token\s*\=\s*([^;]*).*$)|^.*$/,"$1");console.log("取得token測試",c),window.location.href="/"}else console.log("登入失敗"),o.value="登入失敗",e()},warmView:e,test:async()=>{},userData:n,loginwarmText:o,show:l}});const N={class:"warmMain"},B={class:"warmText"},W=["textContent"],R={class:"warmBtn"},U={__name:"loginWarm",setup(n){const o=k();return(l,e)=>(u(),d("div",N,[t("div",B,[t("p",{textContent:T(s(o).loginwarmText)},null,8,W)]),t("div",R,[t("button",{onClick:e[0]||(e[0]=(...i)=>s(o).warmView&&s(o).warmView(...i))},"確定")])]))}},j=g(U,[["__scopeId","data-v-d4b608f2"]]);const p=n=>(D("data-v-c98f6001"),n=n(),I(),n),E={key:0,class:"warmView"},F={class:"container"},H=p(()=>t("h2",null,"會員登入",-1)),L={class:"login_form"},M={class:"group"},O=p(()=>t("label",{for:"user_account"},"帳號:",-1)),q={class:"group"},G=p(()=>t("label",{for:"user_password"},"密碼:",-1)),J={class:"special_req"},P={class:"btn-group"},X=p(()=>t("button",{class:"btn"},"取消",-1)),Y={__name:"loginComponents",setup(n){const o=k();return(l,e)=>{const i=V("RouterLink");return u(),d(x,null,[r(y,{name:"bounce"},{default:m(()=>[s(o).show?(u(),d("p",E,[r(j)])):$("",!0)]),_:1}),t("div",F,[H,t("div",L,[t("div",M,[O,h(t("input",{type:"text",name:"user_account",id:"user_account","onUpdate:modelValue":e[0]||(e[0]=a=>s(o).userData.account=a)},null,512),[[f,s(o).userData.account]])]),t("div",q,[G,h(t("input",{type:"text",name:"user_password",id:"user_password","onUpdate:modelValue":e[1]||(e[1]=a=>s(o).userData.password=a)},null,512),[[f,s(o).userData.password]])]),t("div",J,[r(i,{to:"/register",class:"test"},{default:m(()=>[w("點我註冊")]),_:1}),r(i,{to:"/retrieve",class:"test"},{default:m(()=>[w("忘記密碼")]),_:1})]),t("div",P,[t("button",{class:"btn",onClick:e[2]||(e[2]=(...a)=>s(o).login&&s(o).login(...a))},"登入"),X])])]),t("button",{class:"btn",onClick:e[3]||(e[3]=(...a)=>s(o).test&&s(o).test(...a))},"帶token測試")],64)}}},Z=g(Y,[["__scopeId","data-v-c98f6001"]]);const z={class:"login_main"},A={__name:"login",setup(n){return(o,l)=>(u(),d(x,null,[r(b),t("div",z,[r(Z)])],64))}},st=g(A,[["__scopeId","data-v-aa8f0c93"]]);export{st as default};
