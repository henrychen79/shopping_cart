import{c as v}from"./index-8f24cdfe.js";import{_ as y,C as f,w as D,G as $,o as p,S as h,T as t,U as g,Y as c,R as C,X as u,Z as I,$ as L,V as N,W as _,a3 as k,c as S,a1 as w,a2 as x}from"./_plugin-vue_export-helper-f7306c69.js";import{c as U}from"./cartStore-7940fa6d.js";import"./orderStore-1f698cd7.js";import"./Header-fabc921f.js";import"./runtime-dom.esm-bundler-a6f2cd2a.js";import"./order_api-a4187d68.js";import"./pinia-f4d3ecd1.js";const T=["src"],V={__name:"cartItem",props:{imgData:Object,itemId:Number,indexId:Number},emits:["delbtn"],setup(s,{emit:l}){const r=s,d="http://127.0.0.1:8080",m=`${d}/api/cart/delCartItem`,i=f("");D(()=>{(async()=>{console.log(`${d}/api/product/image?category_id=${r.imgData.category}&product_id=${r.imgData.productInfoID}&type=thumbnail`),await fetch(`${d}/api/product/image?category_id=${r.imgData.category}&product_id=${r.imgData.productInfoID}&type=thumbnail`,{method:"GET"}).then(a=>a.blob()).then(function(a){return i.value=URL.createObjectURL(a),a}).catch(a=>{console.error("Error:",a)})})()});const o=$({id:r.itemId}),n=async()=>{console.log("移除購物車"),await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(e=>e.json()).then(function(e){return e}).catch(e=>{console.error("delCartError:",e)}),l("delbtn")};return(e,a)=>(p(),h("tr",null,[t("td",null,[t("img",{src:i.value,alt:"Loading..."},null,8,T)]),t("td",null,[g(e.$slots,"itemName",{},void 0,!0)]),t("td",null,[g(e.$slots,"itemQuantity",{},void 0,!0)]),t("td",null,[g(e.$slots,"itemPrice",{},void 0,!0)]),t("td",null,[t("button",{onClick:n},c(o.id)+"移除",1)])]))}},E=y(V,[["__scopeId","data-v-75bfd5aa"]]);const b=s=>(w("data-v-db0ba966"),s=s(),x(),s),O={key:0,class:"cartList"},R=b(()=>t("thead",null,[t("tr",null,[t("th",null,"商品圖片"),t("th",null,"商品名稱"),t("th",null,"數量"),t("th",null,"價格"),t("th")])],-1)),j={colspan:"5",class:"total-price"},B=b(()=>t("h3",null,"總金額",-1)),P={__name:"cartList",setup(s){const l=f({}),r=U(),d=f(!1),m=async i=>{let o=await v(1).then(function(n){return console.log(n),n}).catch(n=>{console.error("productInfoUrlError:",n)});l.value=o,r.cartToOrderData=o,d.value=!0};return m(),(i,o)=>{const n=C("router-link");return p(),h(I,null,[u(c(l.value)+" ",1),d.value?(p(),h("table",O,[R,t("tbody",null,[(p(!0),h(I,null,L(l.value[0],(e,a)=>(p(),S(E,{key:e.id,imgData:{category:`${e.category}`,productInfoID:`${e.productNum}`},itemId:e.id,onDelbtn:o[0]||(o[0]=G=>m()),indexId:a},{itemName:_(()=>[t("span",null,c(e.id),1),u(c(e.productName),1)]),itemQuantity:_(()=>[u(c(e.quantity),1)]),itemPrice:_(()=>[u(c(e.price),1)]),_:2},1032,["imgData","itemId","indexId"]))),128))]),t("tfoot",null,[t("tr",null,[t("td",j,[B,t("p",null,c(l.value[1][0].totalPrice),1),N(n,{to:"/shoppingCart/shippingInfo",onClick:i.addNum,class:"btn"},{default:_(()=>[u("結帳")]),_:1},8,["onClick"])])])])])):k("",!0)],64)}}},z=y(P,[["__scopeId","data-v-db0ba966"]]);export{z as default};
